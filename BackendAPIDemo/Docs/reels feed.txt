ğŸ“š BACKEND API ENTEGRASYON REHBERÄ°
Personalized News Reels API - Frontend Integration Guide
Versiyon: 1.0
Son GÃ¼ncelleme: 2025-10-04
Backend URL: http://localhost:8000

ğŸ“‹ Ä°Ã‡Ä°NDEKÄ°LER

Genel BakÄ±ÅŸ
Kimlik DoÄŸrulama
Ana AkÄ±ÅŸlar
API Endpoint'leri
Tracking Sistemi
Personalization Seviyeleri
Hata YÃ¶netimi
Ã–rnekler


1. GENEL BAKIÅ
Sistem Mimarisi
Frontend â†’ API Gateway â†’ Feed Generator â†’ NLP Engine
                     â†“
                Analytics Service â† Preference Engine
Temel Kavramlar
Reel: Sesli haber iÃ§eriÄŸi (audio + metadata)
Feed: KullanÄ±cÄ±ya Ã¶zel reel listesi
Tracking: KullanÄ±cÄ± davranÄ±ÅŸlarÄ±nÄ± kaydetme
Personalization: 3 seviye (cold/warm/hot)

2. KÄ°MLÄ°K DOÄRULAMA
User ID Header (Zorunlu)
TÃ¼m API Ã§aÄŸrÄ±larÄ±nda bu header gÃ¶nderilmeli:
httpX-User-ID: user_12345
Yeni KullanÄ±cÄ±:
Frontend'de ilk aÃ§Ä±lÄ±ÅŸta unique ID oluÅŸtur:
javascript// localStorage'da sakla
let userId = localStorage.getItem('user_id');
if (!userId) {
  userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
  localStorage.setItem('user_id', userId);
}

// Her API Ã§aÄŸrÄ±sÄ±nda kullan
const headers = {
  'X-User-ID': userId,
  'Content-Type': 'application/json'
};

3. ANA AKIÅLAR
3.1 Uygulama Ä°lk AÃ§Ä±lÄ±ÅŸ
1. User ID oluÅŸtur/yÃ¼kle
2. GET /api/reels/feed (ilk feed)
3. Reels gÃ¶ster
4. Ä°zleme tracking baÅŸlat
3.2 Reel Ä°zleme DÃ¶ngÃ¼sÃ¼
1. KullanÄ±cÄ± reel izlemeye baÅŸlar
   â†’ startTracking(reel)
   
2. Audio oynatÄ±lÄ±r
   â†’ Her 5 saniyede tracking gÃ¼ncelle
   
3. KullanÄ±cÄ± emoji atar (opsiyonel)
   â†’ Emoji bilgisini kaydet
   
4. KullanÄ±cÄ± "DetaylarÄ± Oku" tÄ±klar (opsiyonel)
   â†’ Detail modal aÃ§
   â†’ Detail tracking baÅŸlat
   
5. Reel biter veya skip edilir
   â†’ stopTracking()
   â†’ POST /api/reels/track-view
3.3 Feed Yenileme
1. KullanÄ±cÄ± scroll yapar (infinite scroll)
   â†’ GET /api/reels/feed?cursor=last_reel_id
   
2. Ya da manuel refresh
   â†’ GET /api/reels/feed

4. API ENDPOINT'LERÄ°
4.1 Feed Endpoint (Ana)
GET /api/reels/feed
KullanÄ±cÄ±ya Ã¶zel personalized feed dÃ¶ndÃ¼rÃ¼r.
Query Parameters:
limit: int (1-50, default: 20)
cursor: string (pagination iÃ§in, optional)
Headers:
X-User-ID: required
Response:
json{
  "success": true,
  "reels": [
    {
      "id": "reel_abc123",
      "news_data": {
        "title": "Dolar rekor kÄ±rdÄ±",
        "summary": "Dolar/TL kuru 35 liraya yÃ¼kseldi",
        "full_content": [
          "Paragraf 1...",
          "Paragraf 2..."
        ],
        "url": "https://aa.com.tr/...",
        "category": "ekonomi",
        "keywords": ["dolar", "ekonomi", "kur"],
        "images": ["image1.jpg"],
        "published_at": "2025-10-04T10:00:00Z"
      },
      "audio_url": "/audio/reel_abc123.mp3",
      "duration_seconds": 45,
      "is_watched": false,
      "is_trending": false,
      "is_fresh": true,
      "is_recommended": true,
      "recommendation_score": 0.89,
      "recommendation_reason": "nlp_similarity"
    }
  ],
  "pagination": {
    "current_page": 1,
    "has_next": true,
    "next_cursor": "reel_xyz789",
    "total_available": 150
  },
  "feed_metadata": {
    "trending_count": 0,
    "personalized_count": 17,
    "fresh_count": 0,
    "exploration_count": 3,
    "personalization_level": "hot"
  }
}
Frontend KullanÄ±mÄ±:
javascriptasync function loadFeed(cursor = null) {
  const url = cursor 
    ? `/api/reels/feed?limit=20&cursor=${cursor}`
    : '/api/reels/feed?limit=20';
  
  const response = await fetch(url, {
    headers: { 'X-User-ID': userId }
  });
  
  const data = await response.json();
  
  // Reels'leri render et
  data.reels.forEach(reel => {
    renderReel(reel);
  });
  
  // Pagination
  if (data.pagination.has_next) {
    nextCursor = data.pagination.next_cursor;
  }
  
  // Personalization seviyesini gÃ¶ster (optional)
  console.log('Level:', data.feed_metadata.personalization_level);
}

4.2 Track View (Ä°zleme KaydÄ±)
POST /api/reels/track-view
Her reel izlendiÄŸinde Ã§aÄŸrÄ±lÄ±r.
Headers:
X-User-ID: required
Content-Type: application/json
Request Body:
json{
  "reel_id": "reel_abc123",
  "duration_ms": 35000,
  "completed": true,
  "category": "ekonomi",
  "session_id": "session_xyz",
  "emoji_reaction": "â¤ï¸",
  "paused_count": 2,
  "replayed": false,
  "shared": false,
  "saved": false
}
Field AÃ§Ä±klamalarÄ±:

reel_id: Ä°zlenen reel ID (zorunlu)
duration_ms: Ä°zleme sÃ¼resi milisaniye (zorunlu)
completed: %80+ izlendi mi (zorunlu)
emoji_reaction: Emoji (opsiyonel, "â¤ï¸", "ğŸ‘", "ğŸ”¥" vs)
paused_count: KaÃ§ kere duraklattÄ±
replayed: Tekrar oynat tÄ±kladÄ± mÄ±
shared: PaylaÅŸtÄ± mÄ±
saved: Kaydetti mi

Response:
json{
  "success": true,
  "message": "View tracked successfully",
  "view_id": "view_123",
  "meaningful_view": true,
  "engagement_score": 1.2,
  "personalization_level": "warm",
  "total_interactions": 25
}
Frontend KullanÄ±mÄ±:
javascriptclass ReelTracker {
  constructor(reelId) {
    this.reelId = reelId;
    this.startTime = Date.now();
    this.pauseCount = 0;
    this.emojiReaction = null;
  }
  
  onPause() {
    this.pauseCount++;
  }
  
  onEmoji(emoji) {
    this.emojiReaction = emoji;
  }
  
  async stop(completed) {
    const duration = Date.now() - this.startTime;
    
    await fetch('/api/reels/track-view', {
      method: 'POST',
      headers: {
        'X-User-ID': userId,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        reel_id: this.reelId,
        duration_ms: duration,
        completed: completed,
        emoji_reaction: this.emojiReaction,
        paused_count: this.pauseCount
      })
    });
  }
}

// KullanÄ±m:
const tracker = new ReelTracker('reel_abc123');
// ... audio oynatÄ±lÄ±r ...
tracker.onPause(); // Duraklama
tracker.onEmoji('â¤ï¸'); // Emoji
await tracker.stop(true); // Bitir

4.3 Track Detail View (Detay Okuma)
POST /api/reels/track-detail-view
KullanÄ±cÄ± "DetaylarÄ± Oku" tÄ±klayÄ±nca Ã§aÄŸrÄ±lÄ±r.
Request Body:
json{
  "reel_id": "reel_abc123",
  "read_duration_ms": 45000,
  "scroll_depth": 0.8,
  "shared_from_detail": false,
  "saved_from_detail": false,
  "session_id": "session_xyz"
}
Field AÃ§Ä±klamalarÄ±:

read_duration_ms: Detayda kaÃ§ ms kaldÄ±
scroll_depth: Ne kadar scroll yaptÄ± (0-1 arasÄ±)
shared_from_detail: Detaydan paylaÅŸtÄ± mÄ±
saved_from_detail: Detaydan kaydetti mi

Response:
json{
  "success": true,
  "message": "Detail view tracked successfully",
  "meaningful_read": true,
  "engagement_score": 0.75,
  "boost_applied": true
}
Frontend KullanÄ±mÄ±:
javascriptclass DetailTracker {
  constructor(reelId) {
    this.reelId = reelId;
    this.openedAt = Date.now();
    this.maxScroll = 0;
  }
  
  onScroll(scrollPercentage) {
    this.maxScroll = Math.max(this.maxScroll, scrollPercentage);
  }
  
  async close() {
    const duration = Date.now() - this.openedAt;
    
    await fetch('/api/reels/track-detail-view', {
      method: 'POST',
      headers: {
        'X-User-ID': userId,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        reel_id: this.reelId,
        read_duration_ms: duration,
        scroll_depth: this.maxScroll / 100
      })
    });
  }
}

// KullanÄ±m:
function openDetailModal(reel) {
  const tracker = new DetailTracker(reel.id);
  
  // Modal aÃ§
  showModal(reel);
  
  // Scroll tracking
  modalElement.addEventListener('scroll', (e) => {
    const scrollPercentage = (e.target.scrollTop / e.target.scrollHeight) * 100;
    tracker.onScroll(scrollPercentage);
  });
  
  // Modal kapanÄ±nca
  modalElement.addEventListener('close', () => {
    tracker.close();
  });
}

4.4 User Stats (KullanÄ±cÄ± Ä°statistikleri)
GET /api/reels/user/{user_id}/stats
KullanÄ±cÄ±nÄ±n genel istatistikleri.
Response:
json{
  "success": true,
  "data": {
    "user_id": "user_12345",
    "total_reels_watched": 47,
    "total_screen_time_ms": 2100000,
    "completion_rate": 0.78,
    "favorite_categories": ["ekonomi", "teknoloji"],
    "current_streak_days": 5
  }
}

4.5 Preference Stats (Tercih Ä°statistikleri)
GET /api/reels/user/{user_id}/preference-stats
KullanÄ±cÄ±nÄ±n Ã¶ÄŸrenilen tercihleri (debug iÃ§in).
Response:
json{
  "success": true,
  "data": {
    "user_id": "user_12345",
    "personalization_level": "hot",
    "total_interactions": 47,
    "top_categories": [
      {"name": "ekonomi", "score": 0.85},
      {"name": "teknoloji", "score": 0.65}
    ],
    "top_keywords": [
      {"keyword": "dolar", "score": 0.92},
      {"keyword": "faiz", "score": 0.88}
    ],
    "last_updated": "2025-10-04T15:30:00Z"
  }
}

5. TRACKING SÄ°STEMÄ°
5.1 Tracking ZamanlamasÄ±
Continuous Tracking (Her 5 saniye):
javascriptclass ContinuousTracker {
  constructor(reelId) {
    this.reelId = reelId;
    this.startTime = Date.now();
    this.intervalId = null;
  }
  
  start() {
    // Her 5 saniyede lokal state gÃ¼ncelle
    this.intervalId = setInterval(() => {
      const duration = Date.now() - this.startTime;
      console.log(`Tracked: ${duration}ms`);
      // localStorage'a yaz (offline support iÃ§in)
      this.saveToLocal();
    }, 5000);
  }
  
  stop() {
    clearInterval(this.intervalId);
    // Backend'e son tracking'i gÃ¶nder
    this.sendToBackend();
  }
  
  saveToLocal() {
    const data = {
      reelId: this.reelId,
      duration: Date.now() - this.startTime,
      timestamp: Date.now()
    };
    localStorage.setItem('tracking_' + this.reelId, JSON.stringify(data));
  }
  
  async sendToBackend() {
    // ... POST /track-view ...
  }
}
5.2 Emoji Tracking
KullanÄ±cÄ± emoji attÄ±ÄŸÄ±nda:
javascriptfunction onEmojiClick(emoji) {
  // 1. UI'da emoji gÃ¶ster
  showEmojiAnimation(emoji);
  
  // 2. Tracker'a kaydet
  currentTracker.onEmoji(emoji);
  
  // 3. Hemen backend'e gÃ¶nder (optional, stop() sÄ±rasÄ±nda da gÃ¶nderilir)
  // Ä°stersen hemen gÃ¶nder:
  await fetch('/api/reels/track-view', {
    method: 'POST',
    body: JSON.stringify({
      reel_id: currentReel.id,
      duration_ms: Date.now() - currentTracker.startTime,
      completed: false,
      emoji_reaction: emoji
    })
  });
}
5.3 Offline Support
BaÄŸlantÄ± yoksa tracking'i sakla:
javascriptfunction queueTracking(trackingData) {
  const queue = JSON.parse(localStorage.getItem('tracking_queue') || '[]');
  queue.push(trackingData);
  localStorage.setItem('tracking_queue', JSON.stringify(queue));
}

// BaÄŸlantÄ± gelince gÃ¶nder
window.addEventListener('online', async () => {
  const queue = JSON.parse(localStorage.getItem('tracking_queue') || '[]');
  
  for (const data of queue) {
    await fetch('/api/reels/track-view', {
      method: 'POST',
      body: JSON.stringify(data)
    });
  }
  
  localStorage.removeItem('tracking_queue');
});

6. PERSONALIZATION SEVÄ°YELERÄ°
6.1 Cold Start (0-10 etkileÅŸim)
DavranÄ±ÅŸ:

%70 trending reels
%30 fresh (son 3 saat)
Kategori Ã§eÅŸitliliÄŸi yÃ¼ksek

Frontend'de gÃ¶sterim:
javascriptif (feedMetadata.personalization_level === 'cold') {
  // "PopÃ¼ler haberler gÃ¶steriliyor" badge
  showBadge('PopÃ¼ler Haberler');
}
6.2 Warm (10-50 etkileÅŸim)
DavranÄ±ÅŸ:

%80 tercih edilen kategoriler
%20 keÅŸfet
Rule-based matching

Frontend'de gÃ¶sterim:
javascriptif (feedMetadata.personalization_level === 'warm') {
  // "Size Ã¶zel seÃ§ildi" badge
  showBadge('Size Ã–zel');
}
6.3 Hot (50+ etkileÅŸim)
DavranÄ±ÅŸ:

%85 NLP benzerlik
%15 keÅŸfet
Maksimum personalization

Frontend'de gÃ¶sterim:
javascriptif (feedMetadata.personalization_level === 'hot') {
  // "Ä°lginizi Ã§ekebilir" badge + recommendation_score gÃ¶ster
  showBadge('Ä°lginizi Ã‡ekebilir');
  
  if (reel.recommendation_score > 0.8) {
    showHighMatchIndicator(); // YÄ±ldÄ±z icon vs
  }
}

7. HATA YÃ–NETÄ°MÄ°
7.1 Network HatalarÄ±
javascriptasync function fetchFeedWithRetry(retries = 3) {
  for (let i = 0; i < retries; i++) {
    try {
      const response = await fetch('/api/reels/feed', {
        headers: { 'X-User-ID': userId }
      });
      
      if (response.ok) {
        return await response.json();
      }
      
      // 5xx hatasÄ±, retry yap
      if (response.status >= 500) {
        await sleep(1000 * (i + 1)); // Exponential backoff
        continue;
      }
      
      // 4xx hatasÄ±, retry yapma
      throw new Error(`HTTP ${response.status}`);
      
    } catch (error) {
      if (i === retries - 1) throw error;
      await sleep(1000 * (i + 1));
    }
  }
}
7.2 Fallback Content
javascriptasync function loadFeedWithFallback() {
  try {
    return await fetchFeed();
  } catch (error) {
    console.error('Feed load failed:', error);
    
    // Fallback: Cache'den yÃ¼kle
    const cachedFeed = localStorage.getItem('last_feed');
    if (cachedFeed) {
      return JSON.parse(cachedFeed);
    }
    
    // Fallback 2: BoÅŸ state gÃ¶ster
    return {
      success: false,
      reels: [],
      message: 'BaÄŸlantÄ± hatasÄ±. LÃ¼tfen tekrar deneyin.'
    };
  }
}

8. Ã–RNEKLER
8.1 Tam Reel Ä°zleme AkÄ±ÅŸÄ±
javascript// ReelPlayer.js
class ReelPlayer {
  constructor(reel) {
    this.reel = reel;
    this.tracker = new ReelTracker(reel.id);
    this.detailTracker = null;
    this.audioElement = null;
  }
  
  async play() {
    // 1. Audio baÅŸlat
    this.audioElement = new Audio(this.reel.audio_url);
    this.audioElement.play();
    
    // 2. Tracking baÅŸlat
    this.tracker.start();
    
    // 3. Event listeners
    this.audioElement.addEventListener('pause', () => {
      this.tracker.onPause();
    });
    
    this.audioElement.addEventListener('ended', () => {
      this.stop(true);
    });
  }
  
  onEmojiClick(emoji) {
    this.tracker.onEmoji(emoji);
    // UI'da gÃ¶ster
    this.showEmojiAnimation(emoji);
  }
  
  openDetail() {
    this.detailTracker = new DetailTracker(this.reel.id);
    
    // Modal aÃ§
    const modal = document.getElementById('detail-modal');
    modal.style.display = 'block';
    
    // Scroll tracking
    modal.addEventListener('scroll', (e) => {
      const scrollPercentage = (e.target.scrollTop / e.target.scrollHeight) * 100;
      this.detailTracker.onScroll(scrollPercentage);
    });
  }
  
  closeDetail() {
    if (this.detailTracker) {
      this.detailTracker.close();
      this.detailTracker = null;
    }
  }
  
  async stop(completed) {
    this.audioElement.pause();
    await this.tracker.stop(completed);
    
    // Sonraki reel'e geÃ§
    this.onReelComplete();
  }
  
  onReelComplete() {
    // Trigger feed reload veya next reel
    window.dispatchEvent(new CustomEvent('reel-completed'));
  }
}

// KullanÄ±m:
const player = new ReelPlayer(currentReel);
player.play();

// Emoji butonu
emojiButton.addEventListener('click', () => {
  player.onEmojiClick('â¤ï¸');
});

// Detay butonu
detailButton.addEventListener('click', () => {
  player.openDetail();
});
8.2 Infinite Scroll Feed
javascript// FeedManager.js
class FeedManager {
  constructor() {
    this.reels = [];
    this.cursor = null;
    this.loading = false;
  }
  
  async loadInitial() {
    this.reels = [];
    this.cursor = null;
    await this.loadMore();
  }
  
  async loadMore() {
    if (this.loading) return;
    this.loading = true;
    
    try {
      const url = this.cursor 
        ? `/api/reels/feed?limit=20&cursor=${this.cursor}`
        : '/api/reels/feed?limit=20';
      
      const response = await fetch(url, {
        headers: { 'X-User-ID': userId }
      });
      
      const data = await response.json();
      
      // Reels'leri ekle
      this.reels.push(...data.reels);
      
      // Cursor gÃ¼ncelle
      if (data.pagination.has_next) {
        this.cursor = data.pagination.next_cursor;
      } else {
        this.cursor = null;
      }
      
      // UI gÃ¼ncelle
      this.renderReels(data.reels);
      
      // Cache'e kaydet
      localStorage.setItem('last_feed', JSON.stringify(data));
      
    } catch (error) {
      console.error('Load more failed:', error);
    } finally {
      this.loading = false;
    }
  }
  
  renderReels(reels) {
    const container = document.getElementById('reels-container');
    
    reels.forEach(reel => {
      const reelElement = this.createReelElement(reel);
      container.appendChild(reelElement);
    });
  }
  
  createReelElement(reel) {
    // Reel card oluÅŸtur
    const card = document.createElement('div');
    card.className = 'reel-card';
    card.innerHTML = `
      <img src="${reel.news_data.images[0] || 'placeholder.jpg'}">
      <h3>${reel.news_data.title}</h3>
      <p>${reel.news_data.summary}</p>
      <div class="badges">
        ${reel.is_fresh ? '<span class="badge">Yeni</span>' : ''}
        ${reel.is_trending ? '<span class="badge">PopÃ¼ler</span>' : ''}
        ${reel.is_recommended ? '<span class="badge">Size Ã–zel</span>' : ''}
      </div>
      <button class="play-btn">Dinle</button>
    `;
    
    // Play button
    card.querySelector('.play-btn').addEventListener('click', () => {
      this.playReel(reel);
    });
    
    return card;
  }
  
  playReel(reel) {
    const player = new ReelPlayer(reel);
    player.play();
  }
  
  setupInfiniteScroll() {
    window.addEventListener('scroll', () => {
      const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
      
      // %80'e ulaÅŸÄ±nca yeni reels yÃ¼kle
      if (scrollTop + clientHeight >= scrollHeight * 0.8) {
        this.loadMore();
      }
    });
  }
}

// BaÅŸlatma:
const feedManager = new FeedManager();
feedManager.loadInitial();
feedManager.setupInfiniteScroll();

9. PERFORMANS OPTÄ°MÄ°ZASYONU
9.1 Caching Stratejisi
javascript// Feed cache (5 dakika TTL)
class FeedCache {
  constructor() {
    this.cache = new Map();
    this.TTL = 5 * 60 * 1000; // 5 dakika
  }
  
  set(key, value) {
    this.cache.set(key, {
      data: value,
      timestamp: Date.now()
    });
  }
  
  get(key) {
    const cached = this.cache.get(key);
    if (!cached) return null;
    
    // TTL kontrolÃ¼
    if (Date.now() - cached.timestamp > this.TTL) {
      this.cache.delete(key);
      return null;
    }
    
    return cached.data;
  }
}

const feedCache = new FeedCache();

async function fetchFeed() {
  const cacheKey = `feed_${userId}`;
  const cached = feedCache.get(cacheKey);
  
  if (cached) {
    console.log('Feed from cache');
    return cached;
  }
  
  const data = await fetch('/api/reels/feed').then(r => r.json());
  feedCache.set(cacheKey, data);
  return data;
}
9.2 Batch Tracking
javascript// Tracking batch'leme (10 saniyede bir)
class BatchTracker {
  constructor() {
    this.queue = [];
    this.interval = null;
  }
  
  start() {
    this.interval = setInterval(() => {
      this.flush();
    }, 10000); // 10 saniye
  }
  
  add(trackingData) {
    this.queue.push(trackingData);
    
    // Queue Ã§ok bÃ¼yÃ¼dÃ¼yse hemen flush
    if (this.queue.length > 10) {
      this.flush();
    }
  }
  
  async flush() {
    if (this.queue.length === 0) return;
    
    const batch = [...this.queue];
    this.queue = [];
    
    // Her birini gÃ¶nder (ya da batch endpoint yap)
    for (const data of batch) {
      await fetch('/api/reels/track-view', {
        method: 'POST',
        body: JSON.stringify(data)
      });
    }
  }
}

10. GÃœVENLÄ°K
10.1 Rate Limiting
Backend'de rate limit var (100 req/saat). Frontend'de:
javascriptclass RateLimiter {
  constructor(maxRequests = 100, windowMs = 3600000) {
    this.maxRequests = maxRequests;
    this.windowMs = windowMs;
    this.requests = [];
  }
  
  canMakeRequest() {
    const now = Date.now();
    
    // Eski requestleri temizle
    this.requests = this.requests.filter(
      t => now - t < this.windowMs
    );
    
    // Limit kontrolÃ¼
    if (this.requests.length >= this.maxRequests) {
      return false;
    }
    
    this.requests.push(now);
    return true;
  }
}

const limiter = new RateLimiter();

async function safeFetch(url, options) {
  if (!limiter.canMakeRequest()) {
    throw new Error('Rate limit exceeded');
  }
  
  return fetch(url, options);
}

11. TEST SENARYOLARI
Test 1: Yeni KullanÄ±cÄ±
javascript// 1. User ID oluÅŸtur
// 2. Feed yÃ¼kle (cold start)
// 3. Ä°lk reel'i izle (tracking)
// 4. Emoji at
// 5. Feed refresh (hala cold)
Test 2: Aktif KullanÄ±cÄ±
javascript// 1. 60+ reel izlenmiÅŸ user
// 2. Feed yÃ¼kle (hot level)
// 3. recommendation_score kontrol et
// 4. Detail oku (boost)
// 5. Preference stats kontrol et
Test 3: Offline â†’ Online
javascript// 1. Offline yap
// 2. Reel izle (tracking queue'ya gir)
// 3. Online yap
// 4. Queue flush edilmeli

12. SORUN GÄ°DERME
Sorun: Feed boÅŸ dÃ¶nÃ¼yor
Ã‡Ã¶zÃ¼m: Backend'de yeterli PUBLISHED reel yok. /bulk-create Ã§aÄŸÄ±r.
Sorun: Personalization Ã§alÄ±ÅŸmÄ±yor
Ã‡Ã¶zÃ¼m: Tracking doÄŸru Ã§alÄ±ÅŸÄ±yor mu kontrol et. /user/{id}/preference-stats kontrol et.
Sorun: NLP skorlarÄ± hep 0.5
Ã‡Ã¶zÃ¼m: NLP fitted deÄŸil. 50+ reel oluÅŸtur, refit bekle.
Sorun: Feed sÃ¼rekli aynÄ± reels
Ã‡Ã¶zÃ¼m: max_age_days Ã§ok kÄ±sa olabilir. Backend'de 3 gÃ¼n â†’ 7 gÃ¼ne Ã§Ä±kar.

Ä°LETÄ°ÅÄ°M
Backend logs: console.log Ã§Ä±ktÄ±larÄ±nÄ± takip et
Debug endpoint: GET /api/reels/system/nlp-stats